<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaroAI - Telegram Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        #root { width: 100%; min-height: 100vh; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Moon, Star, Heart, Briefcase, TrendingUp, BookOpen, History, Sparkles } = lucide;

        import React, { useState, useEffect } from ‚Äòreact‚Äô;
import { Sparkles, Moon, Star, Heart, Briefcase, TrendingUp, BookOpen, History, Settings } from ‚Äòlucide-react‚Äô;

const TarotApp = () => {
const [view, setView] = useState(‚Äòhome‚Äô);
const [selectedSpread, setSelectedSpread] = useState(null);
const [drawnCards, setDrawnCards] = useState([]);
const [isDrawing, setIsDrawing] = useState(false);
const [interpretation, setInterpretation] = useState(‚Äô‚Äô);
const [isLoading, setIsLoading] = useState(false);
const [userQuestion, setUserQuestion] = useState(‚Äô‚Äô);
const [history, setHistory] = useState([]);

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
useEffect(() => {
if (window.Telegram?.WebApp) {
const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();
tg.enableClosingConfirmation();
}
}, []);

// –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∫–æ–ª–æ–¥–∞ –¢–∞—Ä–æ (22 —Å—Ç–∞—Ä—à–∏—Ö –∞—Ä–∫–∞–Ω–∞)
const tarotCards = [
{ id: 0, name: ‚Äò–®—É—Ç‚Äô, emoji: ‚ÄòüÉè‚Äô, keywords: ‚Äò–Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ, —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç—å, —Å–≤–æ–±–æ–¥–∞‚Äô },
{ id: 1, name: ‚Äò–ú–∞–≥‚Äô, emoji: ‚Äòüé©‚Äô, keywords: ‚Äò–º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, —Å–∏–ª–∞ –≤–æ–ª–∏, –¥–µ–π—Å—Ç–≤–∏–µ‚Äô },
{ id: 2, name: ‚Äò–í–µ—Ä—Ö–æ–≤–Ω–∞—è –ñ—Ä–∏—Ü–∞‚Äô, emoji: ‚ÄòüîÆ‚Äô, keywords: ‚Äò–∏–Ω—Ç—É–∏—Ü–∏—è, —Ç–∞–π–Ω–∞, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≥–æ–ª–æ—Å‚Äô },
{ id: 3, name: ‚Äò–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞‚Äô, emoji: ‚Äòüëë‚Äô, keywords: ‚Äò–∏–∑–æ–±–∏–ª–∏–µ, –º–∞—Ç–µ—Ä–∏–Ω—Å—Ç–≤–æ, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ‚Äô },
{ id: 4, name: ‚Äò–ò–º–ø–µ—Ä–∞—Ç–æ—Ä‚Äô, emoji: ‚ÄòüèõÔ∏è‚Äô, keywords: ‚Äò–∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å‚Äô },
{ id: 5, name: ‚Äò–ò–µ—Ä–æ—Ñ–∞–Ω—Ç‚Äô, emoji: ‚Äò‚õ™‚Äô, keywords: ‚Äò—Ç—Ä–∞–¥–∏—Ü–∏–∏, –∑–Ω–∞–Ω–∏–µ, –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ‚Äô },
{ id: 6, name: ‚Äò–í–ª—é–±–ª–µ–Ω–Ω—ã–µ‚Äô, emoji: ‚Äòüíë‚Äô, keywords: ‚Äò–ª—é–±–æ–≤—å, –≤—ã–±–æ—Ä, –≥–∞—Ä–º–æ–Ω–∏—è‚Äô },
{ id: 7, name: ‚Äò–ö–æ–ª–µ—Å–Ω–∏—Ü–∞‚Äô, emoji: ‚Äòüèá‚Äô, keywords: ‚Äò–ø–æ–±–µ–¥–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å, –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥‚Äô },
{ id: 8, name: ‚Äò–°–∏–ª–∞‚Äô, emoji: ‚Äòü¶Å‚Äô, keywords: ‚Äò–º—É–∂–µ—Å—Ç–≤–æ, —Ç–µ—Ä–ø–µ–Ω–∏–µ, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏–ª–∞‚Äô },
{ id: 9, name: ‚Äò–û—Ç—à–µ–ª—å–Ω–∏–∫‚Äô, emoji: ‚ÄòüïØÔ∏è‚Äô, keywords: ‚Äò–æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ, –ø–æ–∏—Å–∫ –∏—Å—Ç–∏–Ω—ã, –º—É–¥—Ä–æ—Å—Ç—å‚Äô },
{ id: 10, name: ‚Äò–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã‚Äô, emoji: ‚Äòüé°‚Äô, keywords: ‚Äò—Å—É–¥—å–±–∞, –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Ü–∏–∫–ª—ã‚Äô },
{ id: 11, name: ‚Äò–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å‚Äô, emoji: ‚Äò‚öñÔ∏è‚Äô, keywords: ‚Äò–±–∞–ª–∞–Ω—Å, –∏—Å—Ç–∏–Ω–∞, –∫–∞—Ä–º–∞‚Äô },
{ id: 12, name: ‚Äò–ü–æ–≤–µ—à–µ–Ω–Ω—ã–π‚Äô, emoji: ‚ÄòüôÉ‚Äô, keywords: ‚Äò–∂–µ—Ä—Ç–≤–∞, –Ω–æ–≤–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞, –ø–∞—É–∑–∞‚Äô },
{ id: 13, name: ‚Äò–°–º–µ—Ä—Ç—å‚Äô, emoji: ‚ÄòüíÄ‚Äô, keywords: ‚Äò—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –æ–∫–æ–Ω—á–∞–Ω–∏–µ, –Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ‚Äô },
{ id: 14, name: ‚Äò–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å‚Äô, emoji: ‚Äòüßò‚Äô, keywords: ‚Äò–±–∞–ª–∞–Ω—Å, —Ç–µ—Ä–ø–µ–Ω–∏–µ, —É–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å‚Äô },
{ id: 15, name: ‚Äò–î—å—è–≤–æ–ª‚Äô, emoji: ‚Äòüòà‚Äô, keywords: ‚Äò–∏—Å–∫—É—à–µ–Ω–∏–µ, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–º‚Äô },
{ id: 16, name: ‚Äò–ë–∞—à–Ω—è‚Äô, emoji: ‚Äòüè∞‚Äô, keywords: ‚Äò—Ä–∞–∑—Ä—É—à–µ–Ω–∏–µ, –≤–Ω–µ–∑–∞–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω—ã, –æ—Ç–∫—Ä–æ–≤–µ–Ω–∏–µ‚Äô },
{ id: 17, name: ‚Äò–ó–≤–µ–∑–¥–∞‚Äô, emoji: ‚Äò‚≠ê‚Äô, keywords: ‚Äò–Ω–∞–¥–µ–∂–¥–∞, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ‚Äô },
{ id: 18, name: ‚Äò–õ—É–Ω–∞‚Äô, emoji: ‚Äòüåô‚Äô, keywords: ‚Äò–∏–ª–ª—é–∑–∏–∏, –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ, —Å—Ç—Ä–∞—Ö–∏‚Äô },
{ id: 19, name: ‚Äò–°–æ–ª–Ω—Ü–µ‚Äô, emoji: ‚Äò‚òÄÔ∏è‚Äô, keywords: ‚Äò—Ä–∞–¥–æ—Å—Ç—å, —É—Å–ø–µ—Ö, –ø–æ–∑–∏—Ç–∏–≤‚Äô },
{ id: 20, name: ‚Äò–°—É–¥‚Äô, emoji: ‚ÄòüìØ‚Äô, keywords: ‚Äò–≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ, –ø—Ä–æ—â–µ–Ω–∏–µ, –ø—Ä–∏–∑–≤–∞–Ω–∏–µ‚Äô },
{ id: 21, name: ‚Äò–ú–∏—Ä‚Äô, emoji: ‚Äòüåç‚Äô, keywords: ‚Äò–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ, —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å‚Äô }
];

// –¢–∏–ø—ã —Ä–∞—Å–∫–ª–∞–¥–æ–≤
const spreads = [
{ id: ‚Äòdaily‚Äô, name: ‚Äò–ö–∞—Ä—Ç–∞ –¥–Ω—è‚Äô, icon: Moon, cards: 1, description: ‚Äò–≠–Ω–µ—Ä–≥–∏—è —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ –¥–Ω—è‚Äô },
{ id: ‚Äòthree‚Äô, name: ‚Äò–¢—Ä–∏ –∫–∞—Ä—Ç—ã‚Äô, icon: Star, cards: 3, description: ‚Äò–ü—Ä–æ—à–ª–æ–µ, –Ω–∞—Å—Ç–æ—è—â–µ–µ, –±—É–¥—É—â–µ–µ‚Äô },
{ id: ‚Äòlove‚Äô, name: ‚Äò–õ—é–±–æ–≤—å‚Äô, icon: Heart, cards: 3, description: ‚Äò–û—Ç–Ω–æ—à–µ–Ω–∏—è –∏ —á—É–≤—Å—Ç–≤–∞‚Äô },
{ id: ‚Äòcareer‚Äô, name: ‚Äò–ö–∞—Ä—å–µ—Ä–∞‚Äô, icon: Briefcase, cards: 3, description: ‚Äò–†–∞–±–æ—Ç–∞ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è‚Äô },
{ id: ‚Äòfinance‚Äô, name: ‚Äò–§–∏–Ω–∞–Ω—Å—ã‚Äô, icon: TrendingUp, cards: 3, description: ‚Äò–î–µ–Ω–µ–∂–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è‚Äô }
];

// –ü–æ–ª—É—á–µ–Ω–∏–µ AI –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
const getAIInterpretation = async (cards, spreadType, question) => {
setIsLoading(true);

```
try {
  const cardDescriptions = cards.map((card, idx) => 
    `–ü–æ–∑–∏—Ü–∏—è ${idx + 1}: ${card.name} (${card.keywords})`
  ).join('\n');

  const spreadContext = {
    daily: '–∫–∞—Ä—Ç–∞ –¥–Ω—è, –æ–±—â–∞—è —ç–Ω–µ—Ä–≥–∏—è',
    three: '–ü—Ä–æ—à–ª–æ–µ - –ù–∞—Å—Ç–æ—è—â–µ–µ - –ë—É–¥—É—â–µ–µ',
    love: '–í—ã - –ü–∞—Ä—Ç–Ω–µ—Ä - –û—Ç–Ω–æ—à–µ–Ω–∏—è',
    career: '–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è - –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è - –°–æ–≤–µ—Ç',
    finance: '–î–æ—Ö–æ–¥—ã - –†–∞—Å—Ö–æ–¥—ã - –°–æ–≤–µ—Ç'
  };

  const prompt = `–¢—ã –æ–ø—ã—Ç–Ω—ã–π —Ç–∞—Ä–æ–ª–æ–≥. –ü—Ä–æ–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–π —Ä–∞—Å–∫–ª–∞–¥ –¢–∞—Ä–æ:
```

–¢–∏–ø —Ä–∞—Å–∫–ª–∞–¥–∞: ${spreadType} (${spreadContext[spreadType]})
–í–æ–ø—Ä–æ—Å: ${question || ‚Äò–û–±—â–µ–µ –≥–∞–¥–∞–Ω–∏–µ‚Äô}

–ö–∞—Ä—Ç—ã:
${cardDescriptions}

–î–∞–π –∫—Ä–∞—Ç–∫—É—é, –Ω–æ –≥–ª—É–±–æ–∫—É—é –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é (3-4 –∞–±–∑–∞—Ü–∞). –ë—É–¥—å –º–∏—Å—Ç–∏—á–Ω—ã–º, –ø—Ä–æ–Ω–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º. –ì–æ–≤–æ—Ä–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞ (‚Äú–Ø –≤–∏–∂—É‚Ä¶‚Äù). –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã.`;

```
  const response = await fetch('https://api.anthropic.com/v1/messages', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      model: 'claude-sonnet-4-20250514',
      max_tokens: 1000,
      messages: [{ role: 'user', content: prompt }]
    })
  });

  const data = await response.json();
  const aiResponse = data.content[0].text;
  
  setInterpretation(aiResponse);
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
  const reading = {
    id: Date.now(),
    date: new Date().toISOString(),
    spreadType,
    question,
    cards,
    interpretation: aiResponse
  };
  
  setHistory(prev => [reading, ...prev].slice(0, 10));
  
} catch (error) {
  setInterpretation('‚ú® –ö–∞—Ä—Ç—ã –≥–æ–≤–æ—Ä—è—Ç:\n\n' + cards.map((card, idx) => 
    `${card.emoji} **${card.name}**: ${card.keywords}. ${getBasicMeaning(card, idx, spreadType)}`
  ).join('\n\n'));
}

setIsLoading(false);
```

};

// –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –±–µ–∑ AI
const getBasicMeaning = (card, position, spreadType) => {
const meanings = {
0: ‚Äò–í—Ä–µ–º—è —Ä–∏—Å–∫–æ–≤–∞—Ç—å –∏ –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–º –Ω–æ–≤–æ–º—É –æ–ø—ã—Ç—É.‚Äô,
1: ‚Äò–£ –≤–∞—Å –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏.‚Äô,
2: ‚Äò–ü—Ä–∏—Å–ª—É—à–∞–π—Ç–µ—Å—å –∫ —Å–≤–æ–µ–π –∏–Ω—Ç—É–∏—Ü–∏–∏, –æ—Ç–≤–µ—Ç—ã –≤–Ω—É—Ç—Ä–∏ –≤–∞—Å.‚Äô,
3: ‚Äò–ü–µ—Ä–∏–æ–¥ –∏–∑–æ–±–∏–ª–∏—è –∏ —Ä–æ—Å—Ç–∞, –∑–∞–±–æ—Ç—å—Ç–µ—Å—å –æ —Å–µ–±–µ.‚Äô,
4: ‚Äò–ù—É–∂–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –≤ –¥–µ–π—Å—Ç–≤–∏—è—Ö.‚Äô,
5: ‚Äò–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º –º–µ—Ç–æ–¥–∞–º –∏ –º—É–¥—Ä–æ—Å—Ç–∏.‚Äô,
6: ‚Äò–í–∞–∂–Ω—ã–π –≤—ã–±–æ—Ä, —Å–ª–µ–¥—É–π—Ç–µ –∑–æ–≤—É —Å–µ—Ä–¥—Ü–∞.‚Äô,
7: ‚Äò–î–≤–∏–≥–∞–π—Ç–µ—Å—å –≤–ø–µ—Ä–µ–¥ —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –∏ —Ä–µ—à–∏–º–æ—Å—Ç—å—é.‚Äô,
8: ‚Äò–°–∏–ª–∞ –≤ –º—è–≥–∫–æ—Å—Ç–∏, –ø–æ–±–µ–∂–¥–∞–π—Ç–µ –ª—é–±–æ–≤—å—é.‚Äô,
9: ‚Äò–í—Ä–µ–º—è –¥–ª—è —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–∞–±–æ—Ç—ã.‚Äô,
10: ‚Äò–ü–µ—Ä–µ–º–µ–Ω—ã –Ω–µ–∏–∑–±–µ–∂–Ω—ã, –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ –∏—Ö —Å –æ—Ç–∫—Ä—ã—Ç—ã–º —Å–µ—Ä–¥—Ü–µ–º.‚Äô,
11: ‚Äò–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å –≤–æ—Å—Ç–æ—Ä–∂–µ—Å—Ç–≤—É–µ—Ç, –±—É–¥—å—Ç–µ —á–µ—Å—Ç–Ω—ã.‚Äô,
12: ‚Äò–°–º–µ–Ω–∏—Ç–µ —É–≥–æ–ª –∑—Ä–µ–Ω–∏—è, –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã.‚Äô,
13: ‚Äò–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ —Ü–∏–∫–ª–∞, –æ—Å–≤–æ–±–æ–¥–∏—Ç–µ –º–µ—Å—Ç–æ –¥–ª—è –Ω–æ–≤–æ–≥–æ.‚Äô,
14: ‚Äò–ù–∞–π–¥–∏—Ç–µ –∑–æ–ª–æ—Ç—É—é —Å–µ—Ä–µ–¥–∏–Ω—É, –∏–∑–±–µ–≥–∞–π—Ç–µ –∫—Ä–∞–π–Ω–æ—Å—Ç–µ–π.‚Äô,
15: ‚Äò–û—Å–≤–æ–±–æ–¥–∏—Ç–µ—Å—å –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –≤–∞—Å —Å–¥–µ—Ä–∂–∏–≤–∞–µ—Ç.‚Äô,
16: ‚Äò–†–∞–∑—Ä—É—à–µ–Ω–∏–µ –∏–ª–ª—é–∑–∏–π –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –∏—Å—Ç–∏–Ω–µ.‚Äô,
17: ‚Äò–ù–∞–¥–µ–∂–¥–∞ –∏ –∏—Å—Ü–µ–ª–µ–Ω–∏–µ —É–∂–µ –≤ –ø—É—Ç–∏ –∫ –≤–∞–º.‚Äô,
18: ‚Äò–†–∞–∑–±–µ—Ä–∏—Ç–µ—Å—å —Å–æ —Å–≤–æ–∏–º–∏ —Å—Ç—Ä–∞—Ö–∞–º–∏ –∏ –∏–ª–ª—é–∑–∏—è–º–∏.‚Äô,
19: ‚Äò–£—Å–ø–µ—Ö –∏ —Ä–∞–¥–æ—Å—Ç—å –æ—Å–≤–µ—â–∞—é—Ç –≤–∞—à –ø—É—Ç—å.‚Äô,
20: ‚Äò–í—Ä–µ–º—è –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –∏ –Ω–æ–≤–æ–≥–æ –ø—Ä–∏–∑–≤–∞–Ω–∏—è.‚Äô,
21: ‚Äò–í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –≤–∞–∂–Ω–æ–π —Ü–µ–ª–∏, –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –º–æ–º–µ–Ω—Ç–æ–º.‚Äô
};
return meanings[card.id] || ‚Äò–≠—Ç–∞ –∫–∞—Ä—Ç–∞ –Ω–µ—Å–µ—Ç –≤–∞–∂–Ω–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ –¥–ª—è –≤–∞—Å.‚Äô;
};

// –í—ã—Ç—è–≥–∏–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç
const drawCards = async (spread) => {
setIsDrawing(true);
setDrawnCards([]);
setInterpretation(‚Äô‚Äô);

```
// –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã—Ç—è–≥–∏–≤–∞–Ω–∏—è –∫–∞—Ä—Ç
const shuffled = [...tarotCards].sort(() => Math.random() - 0.5);
const drawn = shuffled.slice(0, spread.cards);

for (let i = 0; i < drawn.length; i++) {
  await new Promise(resolve => setTimeout(resolve, 500));
  setDrawnCards(prev => [...prev, drawn[i]]);
}

setIsDrawing(false);

// –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é
await getAIInterpretation(drawn, spread.id, userQuestion);
```

};

// –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
const HomeView = () => (
<div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 text-white p-6">
<div className="max-w-md mx-auto">
<div className="text-center mb-8">
<div className="text-6xl mb-4">üîÆ</div>
<h1 className="text-4xl font-bold mb-2 bg-gradient-to-r from-yellow-200 to-pink-200 bg-clip-text text-transparent">
TaroAI
</h1>
<p className="text-purple-200">–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å–∫–ª–∞–¥—ã —Å AI</p>
</div>

```
    <div className="bg-white/10 backdrop-blur-lg rounded-3xl p-6 mb-6">
      <h2 className="text-xl font-semibold mb-4 flex items-center gap-2">
        <Sparkles className="w-5 h-5" />
        –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å–∫–ª–∞–¥
      </h2>
      
      <div className="space-y-3">
        {spreads.map(spread => {
          const Icon = spread.icon;
          return (
            <button
              key={spread.id}
              onClick={() => {
                setSelectedSpread(spread);
                setView('question');
              }}
              className="w-full bg-gradient-to-r from-purple-500/30 to-pink-500/30 hover:from-purple-500/50 hover:to-pink-500/50 rounded-2xl p-4 text-left transition-all transform hover:scale-105"
            >
              <div className="flex items-center gap-3">
                <Icon className="w-6 h-6 text-yellow-300" />
                <div className="flex-1">
                  <div className="font-semibold">{spread.name}</div>
                  <div className="text-sm text-purple-200">{spread.description}</div>
                </div>
                <div className="text-2xl text-yellow-300">{spread.cards} üÉè</div>
              </div>
            </button>
          );
        })}
      </div>
    </div>

    <div className="flex gap-3">
      <button
        onClick={() => setView('history')}
        className="flex-1 bg-white/10 backdrop-blur-lg rounded-2xl p-4 flex items-center justify-center gap-2 hover:bg-white/20 transition"
      >
        <History className="w-5 h-5" />
        –ò—Å—Ç–æ—Ä–∏—è
      </button>
      <button
        onClick={() => setView('learn')}
        className="flex-1 bg-white/10 backdrop-blur-lg rounded-2xl p-4 flex items-center justify-center gap-2 hover:bg-white/20 transition"
      >
        <BookOpen className="w-5 h-5" />
        –û–±—É—á–µ–Ω–∏–µ
      </button>
    </div>
  </div>
</div>
```

);

// –≠–∫—Ä–∞–Ω –≤–æ–ø—Ä–æ—Å–∞
const QuestionView = () => (
<div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 text-white p-6">
<div className="max-w-md mx-auto">
<button
onClick={() => setView(‚Äòhome‚Äô)}
className=‚Äúmb-6 text-purple-200 hover:text-white‚Äù
>
‚Üê –ù–∞–∑–∞–¥
</button>

```
    <div className="bg-white/10 backdrop-blur-lg rounded-3xl p-6 mb-6">
      <h2 className="text-2xl font-bold mb-4">{selectedSpread?.name}</h2>
      <p className="text-purple-200 mb-6">{selectedSpread?.description}</p>

      <label className="block mb-2 text-sm text-purple-200">
        –í–∞—à –≤–æ–ø—Ä–æ—Å (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
      </label>
      <input
        type="text"
        value={userQuestion}
        onChange={(e) => setUserQuestion(e.target.value)}
        onBlur={(e) => e.preventDefault()}
        placeholder="–û —á–µ–º —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å?"
        className="w-full bg-white/10 border border-purple-300/30 rounded-2xl p-4 text-white placeholder-purple-300/50 mb-6"
        autoComplete="off"
        autoCorrect="off"
        autoCapitalize="off"
        spellCheck="false"
      />

      <button
        onClick={() => {
          setView('reading');
          drawCards(selectedSpread);
        }}
        className="w-full bg-gradient-to-r from-yellow-400 to-pink-500 hover:from-yellow-500 hover:to-pink-600 text-white font-bold py-4 rounded-2xl transition-all transform hover:scale-105 flex items-center justify-center gap-2"
      >
        <Sparkles className="w-5 h-5" />
        –í—ã—Ç—è–Ω—É—Ç—å –∫–∞—Ä—Ç—ã
      </button>
    </div>
  </div>
</div>
```

);

// –≠–∫—Ä–∞–Ω –≥–∞–¥–∞–Ω–∏—è
const ReadingView = () => (
<div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 text-white p-6">
<div className="max-w-md mx-auto">
<button
onClick={() => {
setView(‚Äòhome‚Äô);
setDrawnCards([]);
setInterpretation(‚Äô‚Äô);
setUserQuestion(‚Äô‚Äô);
}}
className=‚Äúmb-6 text-purple-200 hover:text-white‚Äù
>
‚Üê –ù–æ–≤—ã–π —Ä–∞—Å–∫–ª–∞–¥
</button>

```
    <h2 className="text-2xl font-bold mb-6 text-center">{selectedSpread?.name}</h2>

    {/* –ö–∞—Ä—Ç—ã */}
    <div className="flex justify-center gap-4 mb-6 flex-wrap">
      {Array.from({ length: selectedSpread?.cards || 0 }).map((_, idx) => (
        <div
          key={idx}
          className={`w-32 h-48 rounded-2xl flex items-center justify-center text-6xl transition-all duration-500 ${
            drawnCards[idx]
              ? 'bg-gradient-to-br from-yellow-200 to-pink-200 scale-100'
              : 'bg-white/10 backdrop-blur-lg scale-95 animate-pulse'
          }`}
        >
          {drawnCards[idx] ? drawnCards[idx].emoji : 'üé¥'}
        </div>
      ))}
    </div>

    {/* –ù–∞–∑–≤–∞–Ω–∏—è –∫–∞—Ä—Ç */}
    {drawnCards.length > 0 && (
      <div className="bg-white/10 backdrop-blur-lg rounded-3xl p-6 mb-6">
        {drawnCards.map((card, idx) => (
          <div key={idx} className="mb-3">
            <div className="font-semibold text-yellow-300">
              {card.emoji} {card.name}
            </div>
            <div className="text-sm text-purple-200">{card.keywords}</div>
          </div>
        ))}
      </div>
    )}

    {/* –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è */}
    {isLoading && (
      <div className="bg-white/10 backdrop-blur-lg rounded-3xl p-6 text-center">
        <div className="animate-spin text-4xl mb-4">üîÆ</div>
        <p>–ö–∞—Ä—Ç—ã —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç —Å–≤–æ–∏ —Ç–∞–π–Ω—ã...</p>
      </div>
    )}

    {interpretation && !isLoading && (
      <div className="bg-white/10 backdrop-blur-lg rounded-3xl p-6">
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <Sparkles className="w-5 h-5 text-yellow-300" />
          –¢–æ–ª–∫–æ–≤–∞–Ω–∏–µ
        </h3>
        <div className="text-purple-100 whitespace-pre-line leading-relaxed">
          {interpretation}
        </div>
      </div>
    )}
  </div>
</div>
```

);

// –≠–∫—Ä–∞–Ω –∏—Å—Ç–æ—Ä–∏–∏
const HistoryView = () => (
<div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 text-white p-6">
<div className="max-w-md mx-auto">
<button
onClick={() => setView(‚Äòhome‚Äô)}
className=‚Äúmb-6 text-purple-200 hover:text-white‚Äù
>
‚Üê –ù–∞–∑–∞–¥
</button>

```
    <h2 className="text-2xl font-bold mb-6">–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å–∫–ª–∞–¥–æ–≤</h2>

    {history.length === 0 ? (
      <div className="bg-white/10 backdrop-blur-lg rounded-3xl p-8 text-center">
        <div className="text-4xl mb-4">üìú</div>
        <p className="text-purple-200">–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ä–∞—Å–∫–ª–∞–¥–æ–≤</p>
      </div>
    ) : (
      <div className="space-y-4">
        {history.map(reading => (
          <div key={reading.id} className="bg-white/10 backdrop-blur-lg rounded-3xl p-4">
            <div className="flex items-center justify-between mb-2">
              <span className="font-semibold">
                {spreads.find(s => s.id === reading.spreadType)?.name}
              </span>
              <span className="text-sm text-purple-200">
                {new Date(reading.date).toLocaleDateString('ru')}
              </span>
            </div>
            <div className="flex gap-2 mb-2">
              {reading.cards.map((card, idx) => (
                <span key={idx} className="text-2xl">{card.emoji}</span>
              ))}
            </div>
            {reading.question && (
              <p className="text-sm text-purple-200 italic">"{reading.question}"</p>
            )}
          </div>
        ))}
      </div>
    )}
  </div>
</div>
```

);

// –≠–∫—Ä–∞–Ω –æ–±—É—á–µ–Ω–∏—è
const LearnView = () => (
<div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 text-white p-6">
<div className="max-w-md mx-auto">
<button
onClick={() => setView(‚Äòhome‚Äô)}
className=‚Äúmb-6 text-purple-200 hover:text-white‚Äù
>
‚Üê –ù–∞–∑–∞–¥
</button>

```
    <h2 className="text-2xl font-bold mb-6">–°—Ç–∞—Ä—à–∏–µ –ê—Ä–∫–∞–Ω—ã</h2>

    <div className="space-y-3">
      {tarotCards.map(card => (
        <div key={card.id} className="bg-white/10 backdrop-blur-lg rounded-2xl p-4">
          <div className="flex items-center gap-3">
            <span className="text-4xl">{card.emoji}</span>
            <div className="flex-1">
              <div className="font-semibold">{card.name}</div>
              <div className="text-sm text-purple-200">{card.keywords}</div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</div>
```

);

return (
<div className="font-sans">
{view === ‚Äòhome‚Äô && <HomeView />}
{view === ‚Äòquestion‚Äô && <QuestionView />}
{view === ‚Äòreading‚Äô && <ReadingView />}
{view === ‚Äòhistory‚Äô && <HistoryView />}
{view === ‚Äòlearn‚Äô && <LearnView />}
</div>
);
};

export default TarotApp;
        ReactDOM.render(<TarotApp />, document.getElementById('root'));
    </script>
</body>
</html>
